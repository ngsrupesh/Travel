<div class="flight-deals">
  <div class="deals-header">
    <h2>Flight Deals</h2>
    <div class="filters">
      <button mat-button color="primary">
        <mat-icon>filter_list</mat-icon>
        Filter
      </button>
      <button mat-button color="primary">
        <mat-icon>sort</mat-icon>
        Sort
      </button>
    </div>
  </div>

  <div class="deals-grid">
    <mat-card *ngFor="let flight of flights" class="flight-card">
      <div class="image-container">
        <img [src]="flight.image" 
             [alt]="flight.airline" 
             class="flight-image"
             (error)="flight.image = 'https://images.unsplash.com/photo-1436491865332-7a61a109cc05'">
        <div class="image-placeholder" *ngIf="!flight.image">
          <mat-icon>flight</mat-icon>
          <span>No image available</span>
        </div>
      </div>

      <div class="discount-badge" *ngIf="flight.discount_percentage">
        {{flight.discount_percentage}}% OFF
      </div>

      <mat-card-content>
        <div class="flight-info">
          <div class="route-info">
            <div class="location from">
              <span class="city">{{flight.from.city}}</span>
              <span class="country">{{flight.from.country}}</span>
              <span class="time">{{flight.departure_time | date:'shortTime'}}</span>
            </div>

            <div class="flight-details">
              <span class="airline">{{flight.airline}}</span>
              <div class="route-line">
                <div class="line"></div>
                <mat-icon>flight</mat-icon>
              </div>
              <span class="duration">{{flight.duration}}</span>
              <span class="stops">{{flight.stops}} stop(s)</span>
            </div>

            <div class="location to">
              <span class="city">{{flight.to.city}}</span>
              <span class="country">{{flight.to.country}}</span>
              <span class="time">{{flight.arrival_time | date:'shortTime'}}</span>
            </div>
          </div>

          <div class="booking-info">
            <div class="price-class">
              <span class="price">${{flight.price}}</span>
              <span class="class">{{flight.class}}</span>
            </div>
            <button 
              mat-raised-button 
              color="primary"
              (click)="bookFlight(flight)">
              Book Now
            </button>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>